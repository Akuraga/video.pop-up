<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>VideoJS pop-up</title>
  <link href="http://vjs.zencdn.net/5.11.9/video-js.css" rel="stylesheet"> </head>

<body>
  <div id="demo"></div>
  <div id="video__wrapper" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; margin: 0; padding: 0; background-color: black;">
    <div id="video__inner" style="width: 100%; margin: auto;">
      <!-- <video id="my-video" class="video-js vjs-default-skin"></video> -->
    </div>
  </div>
  <script src="http://vjs.zencdn.net/5.11.9/video.js"></script>
  <script type="text/javascript">
    function getData() {
      return Date.now();
    }

    function resetTimer() {
      initialTime = getData();
    }
    document.addEventListener('mousemove', resetTimer);

    var initialTime = getData();
    var maxDelay = 5000;
    var timer = setInterval(timerIncrease, 1000);
    var currentTime;

    function timerIncrease() {
      currentTime = getData() - initialTime;
      if (currentTime >= maxDelay) {
        initialTime = getData();
        clearInterval(timer);
        document.removeEventListener('mousemove', resetTimer);
        var r = new XMLHttpRequest();
        r.onload = function() {
          console.log(r.response);
          console.log(URL.createObjectURL(r.response))
          document.getElementById('video__inner').innerHTML = '<video id="my-video" class="video-js vjs-default-skin"></video>';
          document.getElementById('video__wrapper').style.display = 'flex';
          var player = videojs('my-video', {
            // "width": 600,
            // "height": 300,
            "controls": false,
            "autoplay": false,
            "preload": "auto",
            "fluid": true
          }, function() {
            player.src({
              type: r.response.type,
              src: URL.createObjectURL(r.response)
            });
            player.enterFullWindow();
            player.play();
            player.on('ended', function() {
              console.log('end');
              player.dispose();
              document.getElementById('video__wrapper').style.display = 'none';
              initialTime = getData();
              timer = setInterval(timerIncrease, 1000);
              document.addEventListener('mousemove', resetTimer);
            })
            player.on('click', function() {
              console.log('click');
              player.dispose();
              document.getElementById('video__wrapper').style.display = 'none';
              initialTime = getData();
              timer = setInterval(timerIncrease, 1000);
              document.addEventListener('mousemove', resetTimer);
            })
          })
        };
        r.open("GET", "http://vjs.zencdn.net/v/oceans.mp4");
        r.responseType = "blob";
        r.send();
      }
      document.getElementById("demo").innerHTML = currentTime;
    }
  </script>
</body>

</html>
